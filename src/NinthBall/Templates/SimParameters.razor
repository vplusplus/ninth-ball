@using System;
@using NinthBall.Core;

<div>

    @{
        SimYear Y0 = Model.Iterations[0].ByYear.Span[0];

        double startPreTax  = Y0.Jan.PreTax.Amount;
        double startPostTax = Y0.Jan.PostTax.Amount;
        double startAlloc   = Y0.Jan.PreTax.Allocation;
        int numYears = Model.NoOfYears;
        int numIterations = Model.Iterations.Count;
    }

    <h4 class="mt-3">
        @($"{startPreTax:C0}") pre-tax + @($"{startPostTax:C0}") post-tax = @($"{startPreTax + startPostTax:C0}") | @($"{startAlloc:P0}") stocks | @(numYears) years | @($"{numIterations:#,0}") iterations
    </h4>

    <div class="accordion accordion-flush" id="accAssumptions">
        <div class="accordion-item">
            <h2 class="accordion-header" id="accAssumptionsTitle">
                <button class="accordion-button collapsed py-2" type="button" data-bs-toggle="collapse" data-bs-target="#accAssumptionsBlock" aria-expanded="false" aria-controls="accAssumptionsBlock">
                    Expand to view strategies and assumptions:
                </button>
            </h2>
            <div id="accAssumptionsBlock" class="accordion-collapse collapse" aria-labelledby="accAssumptionsTitle" data-bs-parent="#accAssumptions">
                <div class="accordion-body">
                    <ul>
                        @foreach (var strategy in Model.Strategies)
                        {
                            <li>@strategy</li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>

</div>

@code
{
    [Parameter] public SimResult Model { get; set; } = null!;
}